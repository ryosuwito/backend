{% extends 'main/base.html' %}
{% load static %}
{% block body-content %}
<section data-on="false" data-lg-on="true" class="rd-parallax bg-river-bed">
  <div data-speed="0.65" data-type="media" data-url="{% static 'main/img/bg-image-2.jpg' %}" class="rd-parallax-layer"></div>
  <div data-speed="0" data-type="html" class="rd-parallax-layer">
    <div class="shell text-center">
      <div class="range">
        <div class="cell-xs-12">
          <div class="section-45 section-sm-top-60 section-sm-bottom-68">
            <h2>Careers</h2>
            <hr class="hr-block hr-white"/>
            <p style="margin: 20px 80px 0px 80px; font-size: 18px;">
              Dynamic Technology Lab Pte. Ltd. (DTL) aims to attract the best and brightest, and to train them to be the best in the industry. We are looking for smart, creative and detail-oriented individuals, with intellectual curiosity and enthusiasm, to explore principles behind financial markets.</p>
            </p>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="border-bottom border-bottom-gray-lighter">
  <div class="shell">
    <div class="range">
      <div class="cell-xs-12">
        <ul class="breadcrumbs-custom">
          <li><a href="{% url 'main.index' %}">Home</a></li>
          <li><a href="{% url 'chinaevent.career_talk' %}">2018中国招聘</a></li>
          <li class="active">校园宣讲会</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<section class="section-top-55 section-bottom-40">
  <div class="shell">
    <div class="range">
      <div class="cell-xs-12 cell-md-8 cell-lg-9">
        <h3>校园宣讲会</h3>
        {% for city, test in tests.items %}
        <h4>{{city}}</h4>
        <div class="table-mobile">
          <table class="table table-curious-blue table-bordered">
            <thead>
              <tr>
                <th width="20%">学校</th>
                <th width="40%">地点</th>
                <th width="40%">时间</th>
              </tr>
            </thead>
            <tbody>
            {% for item in test %}
              <tr>
                <td>{{ item.university }}</td>
                <td><a href="#{{ item.mapid }}">{{ item.location }}</a></td>
                <td>{{ item.time }}</td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
        </div>
        {% endfor %}
      </div>
      <div class="cell-xs-12 cell-md-4 cell-lg-3 offset-top-60 offset-md-top-0">
        <div class="inset-md-left-15 inset-md-right-15">
          <div class="range">
            <div class="cell-xs-12 cell-sm-6 cell-md-12 child-offset-41">
              <nav class="page-nav">
                <ul class="page-nav-list">
                  <li class="active"><a href="{% url 'chinaevent.career_talk' %}">校园宣讲会</a></li>
                  <li><a href="{% url 'chinaevent.register' %}">现场笔试注册</a></li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section-bottom-60">
  <div class="shell">
    <div class="range">
      <div class="cell-xs-12 cell-md-8 cell-lg-9">
        <h3>地图</h3>
        <span class="anchor-link" id="loc1"></span>
        <div class="section-25">
            <h4>北京大学，新太阳学生中心212</h4>
            <div class="map" style="border: 1px solid; width: 100%; height: 400px;" id="pku_talk_map">
                <!--116.363116,39.966326-->
            </div>
        </div>

        <span class="anchor-link" id="loc2"></span>
        <div class="section-25">
            <h4>清华大学，伟伦楼501</h4>
            <div class="map" style="border: 1px solid; width: 100%; height: 400px;" id="thu_talk_map">
                <!--39.996826, 116.332154-->
            </div>
        </div>

        <span class="anchor-link" id="loc3"></span>
        <div class="section-25">
            <h4>复旦大学，张江校区第二教学楼2301教室</h4>
            <div class="map" style="border: 1px solid; width: 100%; height: 400px;" id="fdu_talk_map">
                <!--116.317169,39.994895-->
            </div>
        </div>

        <span class="anchor-link" id="loc4"></span>
        <div class="section-25">
            <h4>上海交通大学，闵行校区数学楼一楼大会议室</h4>
            <div class="map" style="border: 1px solid; width: 100%; height: 400px;" id="sjtu_talk_test">
                <!-- 116.316982,39.998808 -->
            </div>
        </div>
    </div>
  </div>
</section>

{% endblock body-content %}

{% block js-extras %}
<script type="text/javascript">
function initialize() {
    var mapPositions = [
        {'id': 'pku_talk_map', 'position': [116.317169, 39.994795]},
        {'id': 'thu_talk_map', 'position': [116.338611,40.00525]},
        {'id': 'fdu_talk_map', 'position': [121.605084,31.19714]},
        {'id': 'sjtu_talk_test', 'position': [121.434525,31.028602]}
    ];
    var maps = [];
    var markers = [];
    var centers = [];
    var href = location.href;

    for (var i = 0; i < mapPositions.length; i++) {
        maps[i] = new BMap.Map(mapPositions[i].id);
        // a hack to deal with maps within tabs
        if (href.indexOf('#written_test') != -1 && i < 3) {
            centers[i] = new BMap.Point(mapPositions[i].position[0] - 0.0027, mapPositions[i].position[1] + 0.0012);
        } else if (href.indexOf('#written_test') == -1 && i == 3) {
            centers[i] = new BMap.Point(mapPositions[i].position[0] - 0.0027, mapPositions[i].position[1] + 0.0012);
        } else {
            centers[i] = new BMap.Point(mapPositions[i].position[0], mapPositions[i].position[1]);
        }
        markers[i] = new BMap.Point(mapPositions[i].position[0], mapPositions[i].position[1]);
        maps[i].centerAndZoom(centers[i], 18);
        maps[i].addOverlay(new BMap.Marker(markers[i]));
        maps[i].addControl(new BMap.NavigationControl());
        maps[i].addControl(new BMap.ScaleControl());
    }
}

function loadScript() {
    var script = document.createElement("script");
    script.src = "http://api.map.baidu.com/api?v=2.0&ak={{ api_key }}&callback=initialize";
    document.body.appendChild(script);

    // this hack to avoid Navbar hides initial content when jumping to in-page anchor
    var shiftWindow = function() { scrollBy(-120, 0) };
        if (location.hash) shiftWindow();
        window.addEventListener("hashchange", shiftWindow);
    }

window.onload = loadScript;
</script>
{% endblock js-extras %}
